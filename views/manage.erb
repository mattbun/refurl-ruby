<!doctype html>

<html>
    <head>
        <title>Manage</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="components/bootstrap/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="components/jqueryfiletree/dist/jQueryFileTree.min.css">
        <script type="text/javascript" src="components/jquery/dist/jquery.min.js"></script>
        <script type="text/javascript" src="components/bootstrap/dist/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="components/jqueryfiletree/dist/jQueryFileTree.min.js"></script>
        <script>

            $(document).ready( function() {
                $("#filelist-container").fileTree({
                    script: 'jqueryfiletree-connector',
                    multiFolder: false
                },
                function(file){
                    console.log(file);
                    $("#path-field").val(file);
                });
            });

            

        </script>
    </head>
  
  <body>
      <div class="container" style="width:750px; height:100%">
          <div class="navbar navbar-default">
              <div class="navbar-header">
                  <a class="navbar-brand" href="#">That</a>
              </div>
              <div class="collapse navbar-collapse">
                  <ul class="nav navbar-nav">
                      <li class="active">
                          <a href="#">Add</a>
                      </li>
                      <li>
                          <a href="#">Manage</a>
                      </li>
                  </ul>
                  <ul class="nav navbar-nav navbar-right">
                      <!-- Someday? <li><a href="#">Settings</a></li> -->
                  </ul>
              </div>
          </div>

          <form action="manage/add" method="POST">
              <div style="float:left">
                  <label class="form-label"><h4>Browse</h4></label>
                  <div style="width:350px; height:500px; overflow:scroll" class="well">
                      <div id="filelist-container">
                      </div>
                  </div>
                  <input type="hidden" id="path-field" name="path" value="">
              </div>
              <div style="float:right; width:350px">
                  <label class="form-label"><h4>Name</h4></label>
                  <input type="text" class="form-control" name="name">
                  <br>
                  <label class="form-label"><h4>Key</h4></label>
                  <div class="input-group">
                      <input id="hash-field" type="text" class="form-control" name="key" value="<%= @hash %>">
                      <div class="input-group-btn">
                          <button type="button" class="btn btn-primary" onclick="$.ajax({url : 'api/hash'}).done(function(data){$('#hash-field').val(data);});">
                              <span class="glyphicon glyphicon-refresh"></span>
                          </button>
                      </div>
                  </div>
                  <br>
                  <br>
                  <input type="submit" class="btn btn-lg btn-block btn-primary" value="Create Link">
              </div>
          </form>
      </div>
  </body>
</html>
